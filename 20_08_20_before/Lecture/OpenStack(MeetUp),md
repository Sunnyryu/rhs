## OpenStack Study

### I want to love that OpenStack


#### OpenStack Meetup

##### first
1. 오픈 스택
   - 예전에는 물리 서버에만 구현이 가능했지만 지금은 컨테이너에서도 가능함

1-1. 오픈스택 개발 서비스
   - 트리플 오(TripleO)
       - 오픈스택을 설치할 수 있는 툴
       - 컨테이너와 KVM을 같이 씀
       - KVM에 서버를 만듬!
       - 오픈스택을 가지고 오픈스택을 설치한다. (O가 3개다!?? ㅎㅎㅎㅎ)
       - 언더 클라우드가 수면 위에 올라있는 오버 클라우드들을 설치함~~
       - 운영하고 사용할 노드들.....
     - 구성요소
       - 언더클라우드에는 배포를 하기 위한 다양한 오픈스택 서비스를 설치할 수 있음(다양한 기본적인 서비스 등을 설치를 함), 도커 데몬과 도커 레지스트리가 켜있는데, 컨테이너를 설치하기 위한 설치 이미지를 가지고 있기에~~
       - 컨트롤러 노드에는 오픈스택 관련된 서비스가 들어있고 컴퓨트 노드에는 서비스를 하기 위한 KVM에 일 시킬 수 있는 에이전트들마 컨테이너로 들어가 있음
   - 패키지 VS 컨테이너
     - 작동 시스템이 있었으면 프로세스는 호스트 위에서 바로 실행되었음(패키지 방식), 컨테이너 방식은 컨테이너 내부에서 서비스가 실행됨
     - 여러가지 오퍼레이트 시스템에 프로세스(api나 educator 등)가 돌아가는 방식 (컨테이너)
     - 마이크로 서비스화가 됨(컨테이너)
     - 오픈스택 노바 아키텍처
       - Package와 컨테이너의 이름은 조금 다름...

1-2. 오픈스택 콘테이너 환경
  - 컨테이너의 환경을 수정 후 컨테이너를 재시작하면 수정한건 모두 사라지고 원래 환경으로 초기화킴 / 작동시스템과 컨테이너는 일부 자원만 서로 공유하고 특정 공간과 각각 공유를 함
  - ex) 노바에는 디렉토리와 컨테이너가 마운트를 하여 내용들을 가지고 수정을 함 (올라올 때 구성요소를 가지고 가서 적용을 해주는 방식)
  - 트러블 슈팅에 경우애는 호스트에 있는 각 서비스들의 디렉토리에 로그가 싸이고 접근을 할 수 있음
  - 예전에는 var에 있었지만 지금은 컨테이너 디렉토리 안의 노바에 로그가 보통 저장이 되용^_^

1-3. 컨테이너화된 오픈스택 구성
  - 컨테이너 화 된 오픈스택을 서비스 디렉토리를 통해...
  - 서비스 디렉토리 내에서 있는 환경설정 파일을 수정하면 컨테이너가 시작할 때 운영체제에 마운트 된 것을 실행해줌
  - 로그들도 확인 가능^_^

1-4. 도커
  - 도커 프로세스들이 돌아가고 있기에... grep과 파이프를 이용해서 봄..
  - docker stop ~~~~(ex:octavia_api) / docker start octavia_api ~~ wow!~(health가 될 때까지 기다려줘야함 약30초정도 -how about 30seconds) / docker restart ~~~
  - 만약 starting이 되지 않을 수도 있기에 항상 확인해주세용 ^_^
  - ex) ps -ef (프로세스 등이 돌아가고 있을꺼임~~)
  - docker exec -ti ~~~~~ (도커 들어가는 실행방법)

1-5. storage
  - cinder 백엔드 스토리지를 NFS로 사용할 경우 NFS 조차도 컨테이너 내부에서만 마운트 포인트를 확인할 수 있음!

1-6 summary
  - 현재는 패키지에서 컨테이너로 바뀌는 추세
  - 컨테이너로 연동된 서비스를 수정가능(특정 환경을 통해서 수정이 가능함)

##### second (english study)

1. searchlight
   - indexing and search service for the cloud resoureces(인덱싱 및 클라우드 리소스를 위해 서비스를 찾음!?)
   - 유저를 위해 빠르게 찾고 가상머신을 작동시키는 것을 제공
   - 현재는 멀티 클라우드 / 가장자리 환경을 찾는 것을 확장하는 것에 집중을 하고 있음
   - Elasticsearch 5.x를 함께 이용하고 있음
   - 오픈스택과 마이크로소프트 아주러, 쿠버네티스, aws로 받고 있음
