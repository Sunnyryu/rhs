## Google Cloud Fundamentals: Core Infrastructure 1

#### GCP Class 1


```

GCP : Compute Engine, Kubernetes Engine, App Engine, Cloud Function, Managed Services (등이 아키텍처임)

컴퓨터가 자신의 라우터에서 가야하는 홈페이지의 라우터까지 가고... 지나가는 곳은 홉이라고 생각하고. 홉을 지날 수록 ttl이 줄어듬

구글은 컨트롤러라는 경로 탭을 가지고 있는데, 소프트웨어 디파인이라는 것을 가지고 있음..
GCP에서 VM을 만들고 다른 것과 연결한다고 해도.. ttl이 줄어들지 않음... 터널로 된 하나의 네트웤으로 구성되어 있음
(그 말은.. 물리적으로 연결이 되어 있다는 소리임!!! - 물리적인 케이블과 해저 케이블도 가지고 있다는 말임, )

인터넷 클라우드는 라우터의 모임이라고 이해해보자 (지금은..) /관문은 .. ISP라고 생각해보자..

우리나라에서는 회선업자 = 인터넷 서비스 업자... (원래는 다른 컨셉이였는디 말이쥬 )

그리고 클라우드 서비스 프로바이저들도 회선을 빌려야하는데.. 구글은 회선도 가지고 있어서 전세계를 물리망을 하나로 묶음 !!

소프트웨어 디파인에서는 컨트롤러가 가지고 있는데.. 그걸 구글은 다해줌..

구글은 하나의 네트웤!!!! => 기존의 홉 네트웍이랑은 다름!!
(곧 회선 임대업자에게 의존이 거의 없음.. 단.. 우리가 사용하는 인터넷 회사와의 구글 간에는 의존이 조금 있음... )

Zone -> Region -> MultiRegion ->  구글 자체의 네트웤(글로벌 서비스!!= 하나의 네트웤)
(리전은 3개의 존이 합쳐짐)
(리전은 어떤 지역에 3개의 idc가 있음 (곧 idc = zone이라고 생각하자))
(리전에다가 기본적으로 3개이상을 씀..) -> 리전들을 묶어서 멀티 리전이라고 함

ex) VM 하나 - Zone / 구글의 ip -> 글로벌 서비스 !

클라우드의 IDC는 오히려 기존보다 보안이 나은 점이 있음..

클라우드에서는 IaaS가 근간이 됨..

시작점..

ex) 보안의 중거성...? / 컴플라이언스.. 준수 => private security, 인증 등이 필요함.. => 구글은 인프라레벨에서는 인증을 해놨기 때문에.. 안전한 컨텐츠를 넣으면 된다. (AWS는 책임 모델이라고 하며,, 시큐어 코딩만 잘하면 되옴니다!(컨텐츠 부분!))

Resource hierarchy levels define trust boundaries

ex1) 조직 -> gcp를 사용한다면 계정을 만들어서 gcp를 사용할 수 있음
(나라고 생각하면 .. 나의 계정이 루트이고.. 내 계정에서 프로젝트에서 만들어야.. 리소스를 배치할 수 있음 / 프로젝트 컨셉은 교육 프로젝트를 했다고 치면, 고등학교 수학을 만들었고 그 안에 여러가지를 넣음.. 프로젝트는 하나의 테넌트라고 할 수 있음.. / 프로젝트 마다 각각 다른 컨셉임. 모든 리소스나 빌딩도 프로젝트 컨셉임... )

루트 계정에서 프로젝트를 만들었고 거기에 vm이나 storage 등 리소스를 만들 수 있음!
프로젝트 폴더라는 컨셉은 위에서 여러가지 과목이 있을 진데, 같은 분이 하는 것이 있을 것이고 이것을 폴더로 묶을 수 있고 폴더안에 폴더로 넣을 수 있음

프로젝트를 만들 때 no organization이 없으면 org Node를 만들 수 없음 (organization이나, 권한을 받은 사람이 만들 수 있음)

실제 퍼미션이나 컨셉 등을 이해할 수 있기에 프로젝트의 컨셉을 이해할 수 있음

격리가 되어있으면 프로젝트와 프로젝트간의 연결은 안되지만..... 퍼블릭 으로 따로따로 통신은 가능함
내가 프로젝터 2개를 만들었는데 (오너가 되어 있는데,) 리소스 핸들링을 할 수 있음, A 프로젝트는 내가 만들고 b는 다른 사람이 만들었다면 권한을 줘야 사용가능함, 프로젝트는 권한을 줄 수 있는 ... 그러한 것이다.

프로젝트 => 리소스를 트래킹할 수 있는 기본적인 단위

구글 크라우드는 계정이 만드는게 gcp가 아님.. (gmail과 goole identify가 주체이므로, 뷰어 게정을 주는게 아니라 권한을 준다고 생각하자.. 프로젝트 오브젝트를 주는 것...)

who - 누구에게 줄 것인가..
can do what - 무엇을 하게 할 것인가.. (무엇 = role이라고 하며, 퍼미션으로 하고 싶으면, 롤을 만들어서 하면 됨 .. 퍼미션은 액션으로 생각하면 쉽게 이해할 수 있음.)
on which resource  - 어느 위치에 만들 것인가. Organization / Project / Resource / Folder에도 줄 수 있음..

Role !! - 퍼미션들의 집합 (액션의 집합)

primitive / predefined / custom

primitive => 대개 일반적인 권한 - 뷰어, 에디터, 오너(크리에이티브 한 사람인데, 이 것도 복수로 줄 수 있음, 에디터보다 iam 관리가 추가 됨), biling(운영자, 회계를 담당하는 사람이라고 생각해보면 됨, 돈을 관리하거나 운영자를 추가하거나 제거할 수 있음)

predifined roles - > InstanceOperator Role 같은 것을 줄 수 있는데, 이미 정해져 있는 권한을 주는 것...(구글이 미리 만들어둔 롤을 줄수 있는 것)

custom role은 그 많은 미리 만들어진 롤의 퍼미션 중에서 내가 필요한 것만 가져오는 것!!
- 약점 =>  얘는 폴더에는 줄 수 없음 !!

service accounts control server-to-server interactions

gsutil -> google could 명령어

cloud directory sync는 다른 microsoft active directory or ldap 같은 디렉토리 서비스 것을 옮겨 올 때 동기화를 해줌

랩북에 있는 것을 그대로 쓰는 것은 좋은데... 명렁어가 어떤 의미인지 알고해야 함!!!
(구글에서 vm을 설치하면 .. sdk가 자동적으로 깔려있음)

GCP는 상위에는 약하게.. 하위에 필요한 강하게 => UNION 방식이라 둘중에서 큰 권한을 사용하므로.. 러프한 것을 하위에 줘야함!

클라우드 마켓 플레이스는 .. 만들어진 것을 구매하여 사용할 수 있음...

mobaxterm - putty와 비슷 퓨티보다 추천하는 .... 것

퍼블릭 클라우드 안에 자기의 저장소(작업공간)를 만들어둠.. => VPC (Virtual Private Cloud => vpc가 다르면 다른 거임!!)

프로젝트를 만들게 되면 default VPC가 설치되기 때문에 오래걸림..

Google Cloud VPC는 글로벌 서비스라 한개 물리망으로 구현되어 있기 때문에 !!!!!

Scale up or scale out with Compute Engine (규모를 키우는 것 / 규모를 분리하여주는 것 , 횡으로 늘려줌 - auto scale이 가능함)

글로벌 로드 발란싱이 가능함 => VPC가 글로벌이기 떄문이며, 애니케스트를 지원하기 때문에,
(내일 추가로 배울 예정)

CDN (Content Delivery Network - cdNetwork 같은 것)

구글 캐싱 서비스 => 유투브 !!

인터 컨넥팅 (하이브리드 클라우드를 만들 때 쓰임)
-추가 설명은 이틀 뒤에 할 예정이니 3.md에 정리할 예정!!

클라우드 스토리지

오브젝트 스토리지( 데이터를 저장하고 처리할 수 있는 것을 구글에서는 스토리지라고 함..=> Database도 스토리지라고 봄)

빅 쿼리 => 분석용이다!!!! (OLAP)
빅 테이블 => Nosql을 하는 database!
실시간 정보를 수집해야하는 것...

structure data => SQL / NOSQL 로 나누거나
OLAP 과 OLTP로 나누기도 함
OLTP (Online Transaction Processing) - 온라인 트랜잭션 처리
OLAP (OnLine Analytical Processing) - 온라인 분석 처리
OLTP :  현재 업무의 효율적인 처리에만 관심이 있음
OLAP : 의사결정에 도움되는 데이터 분석에 관심이 있음

(RDBMS ==Cloud SQL => SQL을 사용하는 곳이라고 생각하면 돼요! )

Cloud Spanner

Cloud Datastore(NOSQL로 되어 있음... 앱앤진으로 쓰였던 것... )

VM / Docker, Container의 차이..

Docker와 Container는 프로세스 베이스으로 돌아가고 있음

웹서버의 경우에는 scale out을 함, VM Base에서 auto scale을 하면 매우 느림 ..

docker file => 어떤 이미지에서 어떤 파일로 만들 건지를 정해주면 만들어줌.... -> 이미지를 컨테이너화... => 컨테이너에 접속해서 서비스를 받을 수 있음...

docker는 일반적으로 vm 위에 존재하고 있음... ->> pod를 가지고 만들 수 있음, 클러스터를 묶어서 해야함.. 클러스트로 묶어서 pod를 다 관리해야함, 클러스터를 묶기가 힘들어서 툴을 사용하는데 툴 중에 하나를 쿠버네티스(K8s)라고 함... 쿠버네티스 클러스터를 만들기가 매우 어려움(마스터 노드, 워크 노드, 파드등을 띄울 때에는 ...)

GCP는 쿠버네티스를 기본으로 가지고 있어서 명령어를 통해서 쉽게 만들 수 있고 명렁어를 이용해서 클러스터 등을 구축할 수 있음 !!

Master Node 조자차도 필요가 없음 .. GCP가 가동 시켜줌...

도커 => 도커 이미지 => 도커 파일(이미지를 형상관리할 수 있는 장점까지도 있음-빌드업 할 때) => 도커 빌드 .. 도커 런을 사용해야함 => 도커 오케스트레이션 툴인 쿠버네티션을 이용해서 클러스터를 묶을 수 있음...

앱 엔진은 좋으나.... 세밀한 설정을 못해서 컨테이너라는 컨셉이 등장함.....
(앱 엔진은 넣어두면 그대로 써야하지만... 컨테이너는 A라는 곳에서나 B라는 곳에서나 사용이 가능함, 소스 repository를 가져와서 쓸 수 있음, 이동이 쉬움...)

이식성이 매우 강함... => 쿠버네티스
```
