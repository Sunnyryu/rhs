## GCP Review

#### 1. cloud

```
클라우드 컴퓨팅의 정의 => NIST의 기준을 표준으로 함 -> 네트워크, 서버, 스토리지, 애플리케이션, 서비스 등 구성 가능한 컴퓨팅 리소스의 공유 풀에 대해 편리하고 언제든지 엑세스 할 수 있으며, 최소한의 관리 노력 또는 서비스 제공업체 간의 상호 작동에 의해 신속하게 제공되어 이용할 수 있는 모델 중 하나

클라우드 모델 및 특징

(서비스 모델 / 배치 모델로 분류 / 클라우드가 갖춰야할 다섯 가지 중요한 특성 제시)
1. 온디맨드 셀프 서비스 ( 사용자는 원하는 시점에 서비스를 바로 사용 가능 - ex) 홈페이지에서 혼자 가능해야함 !!)
2. Broad 네트워크 접근 ( 클라우드 서비스 제공자는 네트워크 기반으로 서비스에 접속가능해야함 -> 다양한 클라이언트에 의해 접속 가능 )
3. 자원 풀( 물리적 자원이나 가상화된 자원은 풀로 관리 -> 사용자의 요청에 의해 사용자에게 할당되거나 다시 풀로 반환됨, 없으면 안되유!)
4. 신속한 확장성( 사용자의 요구에 따라 시스템의 확장 및 축소를 즉시 수행할 수 있어야함)
5. 측정 가능한 서비스(자원의 사용량이 실시간으로 수집되고 모니터링 되어야함 !!)

서비스 모델

Infrastructure as a Service (IaaS) / Plaform as a Service (PaaS) / Software as a Service(SaaS)

배치 모델

Public / Private / Hybride( public + private, public +온프로미스 => 서로 다른 타입의 클라우드가 만났어요.!?) / community cloud (ex) 정부용 클라우드?, 국방부를 위한 클라우드.. / 특정한 목적으로 만들어진 클라우드 ..... => nist가 나눈 것에는 들어가 있지만.. 크게 목록으로 나누진 않음!)

클라우드 플랫폼 ..

프로비저닝... (우리는 이러이러 한 것이 필요해요 !(CPU, Memory, Disk, OS 등...))

고전적인 방식 => 호스트 -> OS -> APP

cloud = host ->  hypervisor ->VM -> OS -> APP
cloud(Type-2 /) host -> os -> hypervisor -> VM -> di -> APP
(Type-1 / Type-2 )

물리적인 머신 -> 하이퍼바이저(+VM) -> OS

VM(file type으로 존재 / 컴퓨팅 네트워크와 스토리지에서 각각 가져옴!!__?? )

클라우드 상태에서는 마이그레이션 상태가 많이 옴 -> 라이브 마이그레이션
갑자기 문제가 생기면 라이브는 아니지만 마이그레이션을 해줌..
```

```
VM 요청 흐름 파악
(사용자가 서버에 페이지 요청 -> 서버가 DB에 요청 -> DB에서 결과 전송 -> 서버가 페이지를 사용자에게 보냄 !!)

GCP 요청 흐름 (기본)
(VM 서버에 요청 -> DB에 요청 -> DB가 서버에 결과 전송 -> 서버가 사용자에게 보냄/서버가 GCP에 사용자 컨텐츠 업로드 -> 브라우저가 정적 콘텐츠를 GCP에 요청 -> GCP에서 정적 콘텐츠를 제공 !! )
```

```
소프트웨어 디파인에서는 컨트롤러가 가지고 있는데.. 그걸 구글은 다해줌..

구글은 하나의 네트웤!!!! => 기존의 홉 네트웍이랑은 다름!!
(곧 회선 임대업자에게 의존이 거의 없음.. 단.. 우리가 사용하는 인터넷 회사와의 구글 간에는 의존이 조금 있음... )

Zone -> Region -> MultiRegion ->  구글 자체의 네트웤(글로벌 서비스!!= 하나의 네트웤)
(ZONE은 가용성이 낮지만 가장 구축하기 쉬운 서비스, 속해 있는 ZONE이 다운되면 ZONE 서비스는 같이 다운)
(Region은 단일 지역의 여러 영역에 걸쳐 복제되어 있음! / 한 존이 안되더라도 다른 존의 인스턴스로 전환)
(리전은 3개의 존이 합쳐짐)
(리전은 어떤 지역에 3개의 idc가 있음 (곧 idc = zone이라고 생각하자))
(리전에다가 기본적으로 3개이상을 씀..) -> 리전들을 묶어서 멀티 리전이라고 함
(멀티 리전 -> 여러 다른 리전으로 구성됨 !-> 최소한의 중단 시간에 계속 실행 가능!)

ex) VM 하나 - Zone / 구글의 ip -> 글로벌 서비스 !

```

```
ex) Google CLoud Datastore의 요구에 따라 2개의 다중 지역 배포 옵션을 제공하는 app engine이 있음! 

클라우드에서는 개인 정보 보호 / 가용성 / 내구성이 보안적으로 안전해야함!

안전한 시설 / 암호화 / 복제 / 백업 등을 해줄 수 있어야함 !!

```

```
Cloud SQL 
- RDBMS를 사용하게 해주는 것!
- Mysql 같은 아이를 실행하는 vm! / 설정을 변경하기 위해 ssh를 사용하지 않아도 되는 mysql 같은 아이와 호환되는 서버 ! / 
- cloud console, SDK, REST API, 명령줄 도구로 모든 설정 변경 가능! 
- 구성에서 cloud sql 인스턴스를 가리키도록 호스트 이름 변경하는 것만으로도 가능!
- GCP에서는 sql 섹션에서 인스턴스를 생성하는 것으로 출발!
- ip 주소를 이용해서 ip/32 등의 cidr 표기법을 이용해서 정확한 ip에서부터 접근 허용 가능 !
- Cloud SQL을 사용하면 전송하는 데 있어 SSL을 쉽게 사용 가능!
- 서버의 CA 인증서 / 클라이언트 인증서 / 클라이언트 개인키 !!
(server-ca.pem으로 ca 인증서 다운 가능! / create a cLIENT Certificate 버튼을 이용해 인증서의 이름을 입력)
(client-keypem, client-cert.pem이 있어야함)
- 복제본을 만들어서 주 db이 손상을 대비하기 쉬움 ! / 읽기 복제본과 기본 복제본을 나눠서 관리가 가능하며 읽기 복제본을 이용해서 
- 각종 상황에 대비 가능! 
- gcp는 Cloud sql의 백업을 자동으로 할 수 있게 설정할 수 있음 
- 연결된 복제본은 백업 복원하기 전에 인스턴스를 삭제해야함 !
- Cloud SQL은 Cloud Storage를 사용해 데이터의 관리형 가져오기 및 내보내기를 하며, db에서 mysqldump 명령을 이용해서 
cloud storage의 버킷에 넣음 ! 
- 구조적으로 정의된 스키마를 적용하여 구조환 데이터를 저장 / 쿼리 기능을 제공하는 언어이며, 데이터를 묻는 질문이 있다면
cloud sql은 매우 탁월 / 내구성은 매우 좋음 / 데이터가 증가하면 쿼리 속도가 느려짐! 
- 외래키 참조를 사용하여 다른 데이터와 관련된 data 저장시 매우 적합
```

```
Cloud DataStore
- Nosql 구조 / 앱 엔진으로 쓰였음 !
- 문서 조장소 같은 느낌 ( 비관계형 저장소의 형태 ! 
- 키를 사용함 ( datastore의 키에는 데이터 유형과 데이터의 고유 식별자가 모두 포함됨! )
- 같은 부모를 가지는 키는 같은 엔티티 그룹에 속함!
- 데이터의 kind가 쓰이는 것은 Datastore
- datastore는 문서를 작성하는 항목, 엔티티느는 키라는 고유한 식별자와 결합된 속성 및 값의 모음 
- datastore은 booleans , string , integer, float, date or time, binary data의 기본적인 속성을 가질 수 있음
- 리스트(문자열), 다른 엔티티르 가리키는 키, 하위 엔티티 역할을 하는 임베디드 엔티티 등에도 사용
- 참조가 유효하다는 것을 강제할 방법이 없어 참조를 최신으로 유지 해야함
- get(해당 키를 사용하여 엔티티 가져옴), put(키를 사용하여 엔티티 저장 / 업데이트), delete(해당키로 엔티티 삭제)
- 색인과 쿼리를 모두 논의해야함 ! / datastore는 조인이 없으며, 색인은 고급 쿼리를 가능하게 쓰임 
- 색인의 경우 자동 생성됨 ! ( 각 속성에 대한 색인이...)
- datastore는 2단계 커밋을 이용하는 프로토콜 사용 (준비 / 완료 단계로 나눔) 
- datastore는 강한 일관성에는 아쉬움을 보임 !!
- datastore는 클라우드 콘솔에서 활성화 해야함 ! /
- 백업은 특별한 상황을 제외하곤 잘 하지 않음.
- 백업 기능은 정기적인 datastore 쿼리에서 cloud storage 버킷으로 내보낼 수 있는 기능(많은 데이터를 )
- 반구조화된 데이터를 관리하는데 뛰어남 , 동일한 종류의 모든 엔티티에 대해 단일 스키마 제공x
- 일반적인 관계형 성격을 지원 x, 참조 무결성이 없음, 특정 쿼리는 색인을 사용하도록 설정 
- 내구성이 매우 좋음! 
- 처리량이 매우 좋음! - 처리량만큼 트래픽 수용가능 ! / 동시 쓰기 조작으로 확장 가능! 
- 상호작용하는 데이터가 많을 수록 비용이 많이 듬!

```

```

```