## Happy Openstack

#### Openstack

##### OpenStack study

1. Neutron 기본 플러그인 ML2
  - Modular Layer 2라고 하며, OpenSwitch, Linuxbridge를 대신해 다양한 네트워크 형태와 메커니즘을 사용
  - 역할
    - ML2를 사용하면 SDN 스위치와 물리 스위치를 사용할 수 있음
    - 스위치를 사용하면 VLAN, GRE, VxLAN, Flat 방식의 네트워킹 타입도 지원할 수 있음
  - 드라이버 이해
    - 가상 랜을 구성하는 VLAN
      - 일반적으로 스위치 1대로 랜 하나 구성 가능
      - 랜은 소규모 사무실이나 학교에서 사용하는 네트워크 방식
      - VLAN을 사용하면 스위치 1대에 랜 여러개를 구성해서 사용할 수 있어 스위치 장비가 많이 필요하지 않음
      - VLAN 모드의 컴퓨트 노드에 생성된 VM(가상 머신)을 구성할 때 컴퓨트 노드에 생성된 각 VM에는 tag 번호가 있으며, 이 태그 번호는 VLAN 번호가 되며, 가상 스위치인 br-int/br-eth1 사이에 있는 int-br-eth1 과 phr-br-eth1이 vm의 태깅된 패킷을 변환해서 외부 통신을 함
    - 터널링 프로토콜 GRE
      - 가상 PTP를 제외하고 다양한 네트워크 레이어 프로토콜 범위를 인터넷 프로토콜 위에 캡슐화할 수 있는 터널링 프로토콜
      - PPTP와 함께 사용해 클라이언트 간 또는 클라이언트와 서버간 VPN을 만듬, GRE는 기존 데이터 패킷을 암호화해서 PPP 헤더가 있는 것처럼 인식하도록 구성
      - GRE 모드로 설치하면 컴퓨트 노드에 생성된 VM은 다른 컴퓨트 노드와 통신 시 터널링된 경로로 패킷을 주고받음
    - 확장성이 있는 가상 네트워크 기술 VxLAN
      - 대규모 클라우드 컴퓨팅을 구축할 때 확장성을 해결하는 가상 네트워크 기술
      - 오버레이를 알아야 하므로 오버레이는 데이터센터에 구축된 물리 네트워크 장비 위의 가상의 얇은 도화지를 올려놓은 것이라고할 수 있음
      - 물리네트워크에 연결된 서로 다른 컴퓨트 노드의 VM은 통신할 때 오렬 놓은 도화지 위에 가상의 터널을 만들어 그 터널로 통신 / 가상의 터널이 VxLAN임
      - VxLAN은 VMware, 아리스타, 시스코에서 만듬
    - 메커니즘 드라이버
      - 메커니즘 드라이버는 다양한 메커니즘을 사용할 수 있고 서로 다른 컴퓨트 노드도 연동할 수 있음

2. Neutron을 설치하는 네트워크 구성도
  - 테스트 베드 구성
    - 설치 시 인스턴스에 직접 할당하는 고정 IP 범위와 외부에서 인스턴스에 접속하는 유동 IP 범위가 필요
    - 고정 IP 범위는 대체적으로 10.0.0.을 주로 사용하고 유동 IP 범위는 공인 IP 범위나 특정 지역에서 접속할 수 있는 인트라넷 IP 범위를 사용함, DHCP 네트워크 환경이 설정되지 않았을 때는 인터넷 공유기를 사용해서 네트워크 테스트 베드 구성 가능
  - 네트워크 구성도
    - 오픈스택 홈페이지의 Physical Network Setup 부분에서 네트워크 구성도 확인 가능
    
